<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Prometric Pass Prediction Exam</title>

<style>
body { font-family: Arial, sans-serif; margin: 20px; }

.question {
  margin-bottom: 18px;
  padding-bottom: 10px;
  border-bottom: 1px solid #ddd;
}

button {
  padding: 10px 18px;
  font-size: 16px;
  margin-top: 20px;
}

/* HEATMAP */
#heatmap {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 6px;
  max-width: 520px;
  margin-top: 20px;
}

.heat {
  padding: 10px 0;
  text-align: center;
  font-size: 12px;
  font-weight: bold;
  border-radius: 4px;
  color: #fff;
  cursor: pointer;
}

.correct { background: #2ecc71; }
.wrong { background: #e74c3c; }
.unanswered { background: #bdc3c7; }

/* TRAINER REVIEW */
#trainerReview {
  margin-top: 30px;
  padding: 15px;
  border: 2px solid #333;
  display: none;
}
</style>
</head>

<body>

<h2>SCFHS Prometric Pass Prediction Exam</h2>

<label>Candidate Name:
  <input type="text">
</label><br><br>

<label>Candidate ID:
  <input type="text">
</label>

<hr>

<!-- ================= EXAM ================= -->
<div id="exam">

<div class="question">
<b>Q1. A 68-year-old male admitted with pneumonia suddenly becomes restless. BP 88/54, HR 124, RR 30, SpO₂ 89% on room air. What is the nurse’s PRIORITY action?</b><br>
<label><input type="radio" name="q1" value="1"> Apply oxygen via non-rebreather mask</label><br>
<label><input type="radio" name="q1" value="0"> Reassess vital signs in 15 minutes</label><br>
<label><input type="radio" name="q1" value="0"> Notify the physician</label><br>
<label><input type="radio" name="q1" value="0"> Document findings</label>
</div>

<!-- Q2–Q100 CONTINUE SAME FORMAT -->

<button type="button" onclick="submitExam()">Submit Exam</button>
</div>

<h3>Item-Level Performance Heatmap</h3>
<div id="heatmap"></div>

<!-- TRAINER REVIEW PANEL -->
<div id="trainerReview">
  <h3 id="reviewTitle"></h3>
  <p id="reviewText"></p>
</div>

<script>
// ===== TRAINER RATIONALES (SEPARATE, SAFE) =====
const trainerRationale = {
  1: "This patient shows signs of acute hypoxia and shock. Airway and oxygenation are the immediate priority before notification or documentation.",
  // 2: "...",
  // 3: "..."
};

// ===== SUBMIT + HEATMAP =====
function submitExam() {
  const heatmap = document.getElementById("heatmap");
  heatmap.innerHTML = "";

  for (let i = 1; i <= 100; i++) {
    const answers = document.getElementsByName("q" + i);
    let status = "unanswered";

    for (let a of answers) {
      if (a.checked) {
        status = a.value === "1" ? "correct" : "wrong";
      }
    }

    const cell = document.createElement("div");
    cell.className = "heat " + status;
    cell.innerText = "Q" + i;
    cell.onclick = () => openTrainerReview(i);
    heatmap.appendChild(cell);
  }
}

// ===== OPEN TRAINER REVIEW =====
function openTrainerReview(qNum) {
  const panel = document.getElementById("trainerReview");
  document.getElementById("reviewTitle").innerText = "Trainer Review – Q" + qNum;
  document.getElementById("reviewText").innerText =
    trainerRationale[qNum] || "Trainer rationale not yet provided.";
  panel.style.display = "block";
}
</script>

</body>
</html>
